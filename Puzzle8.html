<html>
    <title>Puzzle 8</title>
    <head>
        <script>

            function calculaHeur() {

                h1 = 0;
                h2 = 0;
                heu = 0;
                pos = 0;

                for (var i = 0; i <= 8; i++) {

                    if((filho[i] != objetivo[i]) && (filho[i] != 0)) {
                        h1++;

                        for (var j = 0; j <= 8; j++) {

                            if (filho[i] == objetivo[j]) {

                                if (i == 1) {
                                    
                                    if (j == 2) {
                                        pos = 1;
                                    } else if (j == 3) {
                                        pos = 2;
                                    } else if (j == 4) {
                                        pos = 1;
                                    } else if (j == 5) {
                                        pos = 2;
                                    } else if (j == 6) {
                                        pos = 3;
                                    } else if (j == 7) {
                                        pos = 2;
                                    } else {
                                        pos = 3;
                                    }

                                } else if (i == 2) {

                                    if (j == 1) {
                                        pos = 1;
                                    } else if (j == 3) {
                                        pos = 3;
                                    } else if (j == 4) {
                                        pos = 2;
                                    } else if (j == 5) {
                                        pos = 1;
                                    } else if (j == 6) {
                                        pos = 4;
                                    } else if (j == 7) {
                                        pos = 3;
                                    } else {
                                        pos = 2;
                                    }

                                } else if (i == 3) {

                                    if (j == 1) {
                                        pos = 2;
                                    } else if (j == 2) {
                                        pos = 3;
                                    } else if (j == 4) {
                                        pos = 1;
                                    } else if (j == 5) {
                                        pos = 2;
                                    } else if (j == 6) {
                                        pos = 1;
                                    } else if (j == 7) {
                                        pos = 2;
                                    } else {
                                        pos = 3;
                                    }

                                } else if (i == 4) {

                                    if (j == 1) {
                                        pos = 1;
                                    } else if (j == 2) {
                                        pos = 2;
                                    } else if (j == 3) {
                                        pos = 1;
                                    } else if (j == 5) {
                                        pos = 1;
                                    } else if (j == 6) {
                                        pos = 2;
                                    } else if (j == 7) {
                                        pos = 1;
                                    } else {
                                        pos = 2;
                                    }

                                } else if (i == 5) {

                                    if (j == 1) {
                                        pos = 2;
                                    } else if (j == 2) {
                                        pos = 1;
                                    } else if (j == 3) {
                                        pos = 2;
                                    } else if (j == 4) {
                                        pos = 1;
                                    } else if (j == 6) {
                                        pos = 3;
                                    } else if (j == 7) {
                                        pos = 2;
                                    } else {
                                        pos = 1;
                                    }

                                } else if (i == 6) {

                                    if (j == 1) {
                                        pos = 3;
                                    } else if (j == 2) {
                                        pos = 4;
                                    } else if (j == 3) {
                                        pos = 1;
                                    } else if (j == 4) {
                                        pos = 2;
                                    } else if (j == 5) {
                                        pos = 3;
                                    } else if (j == 7) {
                                        pos = 1;
                                    } else {
                                        pos = 2;
                                    }

                                } else if (i == 7) {

                                    if (j == 1) {
                                        pos = 2;
                                    } else if (j == 2) {
                                        pos = 3;
                                    } else if (j == 3) {
                                        pos = 2;
                                    } else if (j == 4) {
                                        pos = 1;
                                    } else if (j == 5) {
                                        pos = 2;
                                    } else if (j == 6) {
                                        pos = 1;
                                    } else {
                                        pos = 1;
                                    }

                                } else if (i == 8) {

                                    if (j == 1) {
                                        pos = 3;
                                    } else if (j == 2) {
                                        pos = 2;
                                    } else if (j == 3) {
                                        pos = 3;
                                    } else if (j == 4) {
                                        pos = 2;
                                    } else if (j == 5) {
                                        pos = 1;
                                    } else if (j == 6) {
                                        pos = 2;
                                    } else {
                                        pos = 1;
                                    }

                                }

                            }

                        }

                        h2 += pos;

                    }

                }

                heu = (h1 + h2);

            }

            function carregaAtualAberto() {

                var auxVarchar = "";

                if (aberto[0] != undefined) {

                    auxVarchar = aberto[0].substring(0, 1);
                    atual[0] = auxVarchar;

                    auxVarchar = aberto[0].substring(3, 2);
                    atual[1] = auxVarchar;

                    auxVarchar = aberto[0].substring(5, 4);
                    atual[2] = auxVarchar;

                    auxVarchar = aberto[0].substring(7, 6);
                    atual[3] = auxVarchar;

                    auxVarchar = aberto[0].substring(9, 8);
                    atual[4] = auxVarchar;

                    auxVarchar = aberto[0].substring(11, 10);
                    atual[5] = auxVarchar;

                    auxVarchar = aberto[0].substring(13, 12);
                    atual[6] = auxVarchar;

                    auxVarchar = aberto[0].substring(15, 14);
                    atual[7] = auxVarchar;

                    auxVarchar = aberto[0].substring(17, 16);
                    atual[8] = auxVarchar;

                }

            }

            function geraFilho(posI, newI) {

                var aux = 0;

                filho = atual.slice(0);

                aux = filho[posI];
                filho[posI] = filho[newI];
                filho[newI] = aux;

                var msg = "------FILHO-------\n";

                var varchar = "";

                for (var i = 0; i <= 8; i++) {

                    varchar += filho[i];

                    if (i < 8) {
                        varchar += ",";
                    }

                }

                msg += varchar;

                //document.write(msg + "<br/>");

                countAberto++;

                aberto[aberto.length] = varchar;

                var auxVarchar = "";
                var auxInt = 0;

                calculaHeur();

                auxHeu[aberto.length] = heu;

                for (var i = 0; i <= (aberto.length - 1); i++) {

                    if (auxHeu[i] <= auxHeu[i - 1]) {

                        auxVarchar = aberto[i];
                        aberto[i] = aberto[i - 1];
                        aberto[i - 1] = auxVarchar;

                        auxInt = auxHeu[i];
                        auxHeu[i] = auxHeu[i - 1];
                        auxHeu[i - 1] = auxInt;

                    }

                }

            }

            var atual = [];
            var filho = [];
            var objetivo = [];

            var testado = [];
            var aberto = [];
            var auxHeu = [];

            var h1 = 0;
            var h2 = 0;
            var heu = 0;
            var countTestado = 0;
            var countAberto = 0;
            var j = 0;

            var concluido = false;
            var isTestado = true;
            var isPrimeira = true;
  
//             atual[0] = 5;
//             atual[1] = 2;
//             atual[2] = 7;
//             atual[3] = 8;
//             atual[4] = 4;
//             atual[5] = 0;
//             atual[6] = 1;
//             atual[7] = 3;
//             atual[8] = 6;

            atual[0] = 1;
            atual[1] = 2;
            atual[2] = 4;
            atual[3] = 0;
            atual[4] = 5;
            atual[5] = 3;
            atual[6] = 7;
            atual[7] = 8;
            atual[8] = 6;

            objetivo[0] = 1;
            objetivo[1] = 2;
            objetivo[2] = 3;
            objetivo[3] = 4;
            objetivo[4] = 5;
            objetivo[5] = 6;
            objetivo[6] = 7;
            objetivo[7] = 8;
            objetivo[8] = 0;
            
//             objetivo[0] = 1;
//             objetivo[1] = 2;
//             objetivo[2] = 3;
//             objetivo[3] = 8;
//             objetivo[4] = 0;
//             objetivo[5] = 4;
//             objetivo[6] = 7;
//             objetivo[7] = 6;
//             objetivo[8] = 5;

            while (!concluido) {

                if (!isPrimeira) {

                    var auxVarchar = "";

                    for (var i = 0; i <= 8; i++) {

                        auxVarchar += atual[i];

                        if (i < 8) {
                            auxVarchar += ",";
                        }

                    }

                    isTestado = false;

                    for (var i = 0; i <= countTestado; i++) {

                        if ((auxVarchar == testado[i]) && (!isTestado)) {
                            isTestado = true;
                        }

                    }

                } else {
                    isTestado = false;
                    isPrimeira = false;
                }

                if (isTestado) {

                    for (var x = 0; x <= countAberto; x++) {
                        aberto[x] = aberto[x + 1];
                    }

                    carregaAtualAberto();

                } else {

                    var c = 0;

                    for (var i = 0; i <= 8; i++) {

                        if (atual[i] != objetivo[i]) {
                            c++;
                            break;
                        }

                    }

                    if (c == 0) {
                        concluido = true;
                    } else {

                        var auxVarchar = "";

                        var msg = "------ATUAL-------";

                        for (var i = 0; i <= 8; i++) {

                            auxVarchar += atual[i];

                            if (i < 8) {
                                auxVarchar += ",";
                            }
                        }

                        msg += auxVarchar;

                        document.write(msg + "<br/>");

                        countTestado++;

                        testado[testado.length] = auxVarchar;

                        if (atual[0] == 0) {
                            geraFilho(0, 1);
                            geraFilho(0, 3);

                        } else if (atual[1] == 0) {
                            geraFilho(1, 0);
                            geraFilho(1, 4);
                            geraFilho(1, 2);

                        } else if (atual[2] == 0) {
                            geraFilho(2, 1);
                            geraFilho(2, 5);

                        } else if (atual[3] == 0) {
                            geraFilho(3, 0);
                            geraFilho(3, 4);
                            geraFilho(3, 6);

                        } else if (atual[4] == 0) {
                            geraFilho(4, 1);
                            geraFilho(4, 3);
                            geraFilho(4, 5);
                            geraFilho(4, 7);

                        } else if (atual[5] == 0) {
                            geraFilho(5, 2);
                            geraFilho(5, 4);
                            geraFilho(5, 8);

                        } else if (atual[6] == 0) {
                            geraFilho(6, 3);
                            geraFilho(6, 7);

                        } else if (atual[7] == 0) {
                            geraFilho(7, 6);
                            geraFilho(7, 4);
                            geraFilho(7, 8);

                        } else if (atual[8] == 0) {
                            geraFilho(8, 7);
                            geraFilho(8, 5);

                        }

                        carregaAtualAberto();

                    }

                }

            }

            var msg = "putamerda funcionou";

            for (var i = 0; i <= 8; i++) {
                msg += atual[i];
            }

            document.write(msg + "<br/>");

        </script>
    </head>
    <body>

    </body>

</html>




